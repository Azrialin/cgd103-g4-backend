<template>
    <!----------------Â∞öÊú™ÂÆåÊàê---------------------------
        üì£ Á¢∫Ë™çÈçµÊâÄÈÄ£ÂãïÁöÑÂäüËÉΩÈÇÑÊ≤íÂØ´Â•ΩÔºåÈÉΩÂÖàÊö´Êîætoggle
    üîπ Êñ∞Â¢ûÊ∂àÊÅØ 
        Á¢∫Ë™çÈçµ Ë≥áÊñôÈ©óË≠âÊ¢ù‰ª∂
        Êñ∞Â¢ûÂÆåË≥áÊñôÂæåÔºåË°®Ê†ºÊ°ÜÂà™Èô§Ë≥áÊñôÔºåÈóúÊéâË°®Ê†ºÁï´Èù¢ÔºåÂΩàÂá∫Êñ∞Â¢ûÊàêÂäü
    üîπ Âà™Èô§Ê∂àÊÅØ(ËçâÁ®ø)
    üîπ Á∑®ËºØÊ∂àÊÅØ
        ‰∏äÊû∂ Êåâ‰∏ãÁ¢∫Ë™çÈçµÁöÑË≥áÊñô‰øÆÊîπ(‰∏çÂèØÊúâÁ©∫ÂÄºÊ¨Ñ‰Ωç)
        ËçâÁ®ø Êåâ‰∏ãÁ¢∫Ë™çÈçµÁöÑË≥áÊñô‰øÆÊîπ(ÈÄ£ÂãïË≥áÊñôÊú¨Ë∫´)
        ÊÉ≥Ê≥ï: ÂÖàÊ∏ÖÁ©∫Ë°®ÂñÆÂÖßÂÆπÔºåÂú®ÊääÊâÄÊúâÁöÑË≥áÊñôÊñ∞Â¢û‰∏äÂéª
    üîπ ÊèêÁ§∫ÂΩàÁ™óÂä†ÂÖ•
    ( üîπ ÂêÑÁãÄÊÖãË≥áÊñôÁ≠ÜÊï∏È°ØÁ§∫Êñº‰∏ãÊñπ)
    üîπ ‰∏äÂÇ≥ÂúñÁâáÁöÑÊñπÊ≥ï  (ÁÇ∫‰∫ÜÊñ∞Â¢ûË≥áÊñôÊ≠£Â∏∏ÔºåÂÖàÊâæÂπæÂºµÂúñÁâáÊñ∞Â¢ûÂà∞20.jpg)
    üîπ phpÊîæÁΩÆ‰ΩçÁΩÆ? (ÂæåÂè∞ÁöÑÊúâÊîæpublicÂóé ÁõÆÂâçÊàëÁöÑphpÊòØÂú®wwwroot)
    ------------------------------------------------------->
    <!------------------- Á≠ÜË®ò
    ÈªûÊìäÁµêÊûúÁÇ∫ÈªûÊìäÁöÑÂÖßÂÆπ
    1.ÊåâÈàïclickË®≠ÂÆöfunctionÔºå‰∏¶Â∏∂ÂèÉÊï∏ Á∑®ËºØ : (row.news_no)  | Âà™Èô§ (row)
    2. dataÊñ∞Â¢ûÂ±¨ÊÄßÂÄº activeIndex:null,
    3-1 Âà™Èô§ÂáΩÂºè:
                remove (index) { //ËçâÁ®ø -Âà™Èô§Ë≥áÊñô(ÁõÆÂâçÂÉÖÁï´Èù¢‰∏äÈ°ØÁ§∫Âà™Èô§)
                this.dataDraft.splice(index, 1);
                },
    3-2 Á∑®ËºØÂáΩÂºè: 
                activeDraftData(){
                return this.dataDraft.find(v=> v.news_no === this.activeIndex) ?? {}
                },
    --------------------->
    <!-- 
    1.ÁßªÂãïÂ∞àÊ°àÂà∞wwwroot„ÄÅsource treeÊõ¥Êîπ(remove markÂéüÊú¨ÁöÑÔºåaddÂºïÈÄ≤Êñ∞ÁöÑ((Ë∑ØÂæë)))
    2.connect booksÊñ∞Â¢û‰∏ÄÂÄãÂ∞àÈ°åÁâàÊú¨ÔºåÊõ¥ÊîπÈÄ£ÂãïÁöÑË≥áÊñôÂ∫´(ÂêçÁ®±„ÄÅË∑ØÂæë) connectG4.php
    3.wwwroot phpÊñ∞Â¢ûlist Â∞èÈæúÁöÑË∑®ÂüüÈÇ£‰∏ÄÊÆµ
    4.Êñ∞Â¢û
    // Ê∏¨Ë©¶Êú¨Âú∞Ë≥áÊñôÂ∫´ fetch
            // getFaqData(){
            //     fetch('http://localhost/list.php')
            //     .then(res=>res.json())
            //     .then(json=>{
            //         this.faqList = json;
            //     })
            // },
    5.Ë™øÊï¥Ë≥áÊñôÁµêÊßãËàáÂ•ó‰ª∂ÁöÑË≥áÊñôÈ°ØÁ§∫
    -->
    <!-- 
    ÁõÆÁöÑ: Êñ∞Â¢ûË≥áÊñô    
    1. Êñ∞Â¢ûË≥áÊñôfunction addFaqData Á∂ÅÂÆöÊåâÈàï
            addFaqData(){
                let xhr = new XMLHttpRequest();
                xhr.onload = function(){
                    let result = JSON.parse(xhr.responseText);
                    alert(result.msg);
                    // document.getElementById("btnReset").click();
                    // $id("btnReset").click();
                }
                xhr.open("post", "http://localhost/CGD103_PHP_class/project_books_formData/faq_insert.php", true);
                xhr.send(new FormData(document.getElementById("myForm")));
            },
    2. html FormÂ§æË¶ÅÂÇ≥ÈÄÅÁöÑË≥áÊñôÁØÑÂúç
    3.ÊúâÂÖ©ÂÄãÊñ∞Â¢ûË≥áÊñôÁöÑÊñπÊ≥ï project_books_formData(HTML5) 1.js(prod_insert.html) 2.php(Ê≠§Ê¨°Áî®ÁöÑÊñπÊ≥ï) prod_insert.php
    4. Ë°®ÂñÆÂ∞çÊáâË≥áÊñôÂ∫´Êñ∞Â¢ûÁöÑÊ¨Ñ‰Ωç ÊñπÊ≥ïÊúâ‰∫å 1.Ë°®ÂñÆÁµ¶name(Ë¶ÅÂ∞çÁÖßPhp)  2.Êâç‰øäfetchÁöÑÊñπÊ≥ï(?)
    5.
     -->
     <!-- Á∑®ËºØË≥áÊñô function -->
     <!-- Âà™Èô§Ë≥áÊñô function 
    1. Âà™Èô§Ë≥áÊñôfunction removeData Á∂ÅÂÆöÊåâÈàï
    2. removeData(){
        //ÂΩàÂá∫ÊòØÂê¶Á¢∫Ë™çÂà™Èô§ÂΩàÁ™ó
        //if (Á¢∫Ë™ç){
            Âü∑Ë°åÂà™Èô§Êåá‰ª§
        }else()
    }
    -->
    <div class="backstage-news" >
        <div class="backstage-content">
            <div class="btn-add">
                <button class="font-20 btn-blue" @click="newToggle">Êñ∞Â¢ûÊ∂àÊÅØ</button>
            </div>
            <div class="news-manager">
                <Tabs  type="card" :animated="false">
                    <TabPane class="scrollBar"  label="‰∏äÊû∂" >
                        <Table  stripe border :columns="columns" :data="dataOn" >
                            <!-- ÂÖ¨ÂëäÁ∑®Ëôü -->
                            <template #news_no="{ row, index }">
                                <Input type="text" v-if="editIndex === index" />
                                <span v-else>{{ row.news_no }}</span>
                            </template>
                            <!-- ‰∏äÊû∂Êó•Êúü -->
                            <template #news_time="{ row, index }">
                                <Input type="text"  v-if="editIndex === index" />
                                <span v-else>{{ row.news_time }}</span>
                            </template>
                            <!-- ÊúÄÂæåÁ∑®ËºØ -->
                            <template #news_last_edit="{ row, index }">
                                <Input type="text"  v-if="editIndex === index" />
                                <span v-else>{{ row.news_time }}</span>
                            </template>
                            <!-- ÂàÜÈ°û -->
                            <template #news_type="{ row, index }">
                                <Input type="text"  v-if="editIndex === index" />
                                <span v-else>{{ (row.news_type) }}</span>
                            </template>
                            <!-- Ê®ôÈ°å -->
                            <template #news_title="{ row, index }" >
                                <Input type="text"  v-if="editIndex === index" />
                                <span v-else >{{ row.news_title }}</span>
                            </template>
                            <!-- ÁãÄÊÖã -->
                            <template #news_status="{ row, index }">
                                <Input type="text" v-if="editIndex === index" />
                                <span v-else>{{ row.news_status }}</span>
                            </template>
                            <!-- ÊåâÈàï -->
                            <template #action="{ row }">
                                <div class="btn-box">
                                    <span class="icon material-symbols-outlined"  @click="editOnData(row.news_no)" style="cursor: pointer;">edit_square</span>
                                </div>
                            </template>
                        </Table>
                    </TabPane>
                    <TabPane label="ËçâÁ®ø" >
                        <Table class="scrollBar" stripe border :columns="columns" :data="dataDraft" >
                            <!-- ÂÖ¨ÂëäÁ∑®Ëôü -->
                            <template #news_no="{ row, index }">
                                <Input type="text"  v-if="editIndex === index" />
                                <span v-else>{{ row.news_no }}</span>
                            </template>
                            <!-- ‰∏äÊû∂Êó•Êúü -->
                            <template #news_time="{ row, index }">
                                <Input type="text"  v-if="editIndex === index" />
                                <span v-else>{{ row.news_time }}</span>
                            </template>
                            <!-- ÊúÄÂæåÁ∑®ËºØ -->
                            <template #news_last_edit="{ row, index }">
                                <Input type="text"  v-if="editIndex === index" />
                                <span v-else>{{ row.news_last_edit }}</span>
                            </template>
                            <!-- ÂàÜÈ°û -->
                            <template #news_type="{ row, index }">
                                <Input type="text"  v-if="editIndex === index" />
                                <span v-else>{{ (row.news_type) }}</span>
                            </template>
                            <!-- Ê®ôÈ°å -->
                            <template #news_title="{ row, index }">
                                <Input type="text"  v-if="editIndex === index" />
                                <span v-else>{{ row.news_title }}</span>
                            </template>
                            <!-- ÁãÄÊÖã -->
                            <template #news_status="{ row, index }">
                                <Input type="text"  v-if="editIndex === index" />
                                <span v-else>{{ row.news_status }}</span>
                            </template>
                            <!-- ÊåâÈàï -->
                            <template #action="{ row  }">
                                <div class="btn-box">
                                    <Space :size="size">
                                        <span class="icon material-symbols-outlined"   @click="editDraftData(row.news_no)" style="cursor: pointer;">edit_square</span>
                                        <span class="icon material-symbols-outlined"  @click="remove(row)" style="cursor: pointer;">delete</span>
                                    </Space>
                                </div>
                            </template>
                        </Table>
                    </TabPane>
                    <TabPane label="‰∏ãÊû∂" >
                        <Table class="scrollBar" stripe border :columns="columns" :data="dataOff" >
                            <!-- ÂÖ¨ÂëäÁ∑®Ëôü -->
                            <template #news_no="{ row, index }">
                                <Input type="text"  v-if="editIndex === index" />
                                <span v-else>{{ row.news_no }}</span>
                            </template>
                            <!-- ‰∏äÊû∂Êó•Êúü -->
                            <template #news_time="{ row, index }">
                                <Input type="text"  v-if="editIndex === index" />
                                <span v-else>{{ row.news_time }}</span>
                            </template>
                            <!-- ÊúÄÂæåÁ∑®ËºØ -->
                            <template #news_last_edit="{ row, index }">
                                <Input type="text"  v-if="editIndex === index" />
                                <span v-else>{{ row.news_time }}</span>
                            </template>
                            <!-- ÂàÜÈ°û -->
                            <template #news_type="{ row, index }">
                                <Input type="text" v-if="editIndex === index" />
                                <span v-else>{{ (row.news_type) }}</span>
                            </template>
                            <!-- Ê®ôÈ°å -->
                            <template #news_title="{ row, index }">
                                <Input type="text"  v-if="editIndex === index" />
                                <span v-else>{{ row.news_title }}</span>
                            </template>
                            <!-- ÁãÄÊÖã -->
                            <template #news_status="{ row, index }">
                                <Input type="text"  v-if="editIndex === index" />
                                <span v-else>{{ row.news_status }}</span>
                            </template>
                            <!-- ÊåâÈàï -->
                            <template #action="{ row }">
                                <div class="btn-box">
                                    <span class="material-symbols-outlined"  @click="checkOffData(row.news_no)" style="cursor: pointer;">search</span>
                                </div>
                            </template>
                        </Table>
                    </TabPane>
                </Tabs>
            </div>
        </div>
    </div>
    <!-- style="display:none" -->
    <!--‰∏ÄÂºµÂÖ®Êñ∞Ë°®ÂñÆ -->
    <keep-alive>
        <form method="post" id="addNewsForm" enctype="multipart/form-data">
            <div class="popup " v-show="seenNew" >
                <div class="popup-head font-20">
                    <div class="news-no">
                        <span>ÂÖ¨ÂëäÁ∑®Ëôü</span>
                        <span name=""></span>
                    </div>
                    <div class="on-date">
                        <span class="date">ÁôºÂ∏ÉÊôÇÈñì</span>
                        <span class="date"></span>
                        <!-- <input type="text" name="news_time" id=""> -->
                    </div>
                    <div class="last-edit-date">
                        <span class="date">ÊúÄÂæåÊõ¥Êñ∞</span>
                        <span class="date"></span>
                        <!-- <input type="text" name="news_last_edit" id=""> -->
                    </div>
                </div>
                <div class="popup-content font-18">
                    <div class="popup-data">
                        <label for="">ÁãÄÊÖã
                            <select name="news_status" id="">
                                <option value="ËçâÁ®ø">ËçâÁ®ø</option>
                                <option value="‰∏äÊû∂">‰∏äÊû∂</option>
                                <option value="‰∏ãÊû∂">‰∏ãÊû∂</option>
                            </select>
                        </label>
                        <label for="">ÂàÜÈ°û
                            <select name="news_type" id="">
                                <option value="ÈáçË¶Å">ÈáçË¶Å</option>
                                <option value="Ê¥ªÂãï">Ê¥ªÂãï</option>
                                <option value="ÂÖ∂‰ªñ">ÂÖ∂‰ªñ</option>
                            </select>
                        </label>
                    </div>
                    <div class="input-txt">
                        <div class="input-title">
                            <label for="">Ê®ôÈ°åÔºö
                                <Input name="news_title" placeholder="Ë´ãËº∏ÂÖ•Ê®ôÈ°å" clearable style="width: 500px" />
                            </label>
                        </div>
                        <div class="input-des">
                            <label for="">ÂºïÊñáÔºö
                                <Input name="news_text_start" clearable type="textarea" :rows="2" placeholder="ÂâçÂè∞Ê®ôÈ°åÊïòËø∞" style="width: 500px"/>
                            </label>
                        </div>
                        <div class="input-des">
                            <label for="">ÂÖßÊñáÔºö
                                <Input name="news_text_middle" clearable type="textarea" :rows="4" placeholder="Ë©≥Á¥∞ÂÖßÊñá(Êâø)" style="width: 500px"/>
                            </label>
                        </div>
                        <div class="input-des">
                            <label for="">ÂÖßÊñáÔºö
                                <Input name="news_text_trans" clearable type="textarea" :rows="4" placeholder="Ë©≥Á¥∞ÂÖßÊñá(ËΩâ)" style="width: 500px"/>
                            </label>
                        </div>
                        <div class="input-des">
                            <label for="">ÁµêÂ∞æÔºö
                                <Input name="news_text_end" clearable type="textarea" :rows="2" placeholder="Ë´ãËº∏ÂÖ•ÂÖßÂÆπ" style="width: 500px"/>
                            </label>
                        </div>
                    </div>
                    <div class="input-pic">
                        <label class="test" for="">ÊèíÂÖ•ÂúñÁâáÔºö
                            <input type="file">
                        </label>
                    </div>
                    <div class="input-pic-des">
                        <label for="">ÂúñÁâáÊïòËø∞Ôºö
                            <Input name="news_img_des" placeholder="Ë´ãËº∏ÂÖ•ÂúñÁâáÊïòËø∞" clearable style="width: 500px" />
                        </label>
                    </div>
                    <div class="popup-btn">
                        <button type="button" class="btn-blue_2nd" @click="newToggle">ÂèñÊ∂à</button>
                        <button type="button" class="btn-blue" @click="addNewsData">Á¢∫Ë™ç</button>
                        <!-- Á¢∫Ë™çÈçµÂäüËÉΩÂæÖË£úÔºåÊö´Êîætoggle -->
                    </div>
                </div>
            </div>
        </form>
    </keep-alive>

    <!--‰∏≤ËÅØË≥áÊñôÁî®Ë°®ÂñÆ(‰∏äÊû∂)ÂèØÁπºÁ∫å‰∏äÊû∂„ÄÅ‰∏ãÊû∂ÔºåÁÑ°ËçâÁ®ø-->
    <div class="popup on" v-show="seeOnData">
        <div class="popup-head font-20">
            <div class="news-no">
                <span>ÂÖ¨ÂëäÁ∑®Ëôü</span>
                <span >{{activeData.news_no}}</span>
            </div>
            <div class="on-date">
                <span class="date">ÁôºÂ∏ÉÊôÇÈñì</span>
                <span class="date">{{activeData.news_time}}</span>
            </div>
            <div class="last-edit-date">
                <span class="date">ÊúÄÂæåÊõ¥Êñ∞</span>
                <span class="date">{{activeData.news_last_edit}}</span>
            </div>
        </div>
        <div class="popup-content font-18">
            <div class="popup-data">
                <label for="">ÁãÄÊÖã
                    <select name="" id="" >
                        <option value="‰∏äÊû∂" >‰∏äÊû∂</option>
                        <option value="‰∏ãÊû∂" >‰∏ãÊû∂</option>
                    </select>
                </label>
                <label for="">ÂàÜÈ°û
                    <select name="" id="">
                        <option value="ÈáçË¶Å">ÈáçË¶Å</option>
                        <option value="Ê¥ªÂãï">Ê¥ªÂãï</option>
                        <option value="ÂÖ∂‰ªñ">ÂÖ∂‰ªñ</option>
                    </select>
                </label>
            </div>
            <div class="input-txt">
                <div class="input-title">
                    <label for="">Ê®ôÈ°åÔºö
                        <Input v-model="activeData.news_title" clearable style="width: 500px" />
                    </label>
                </div>
                <div class="input-des">
                    <label for="">ÂºïÊñáÔºö
                        <Input v-model="activeData.news_text_start" clearable type="textarea" :rows="2" placeholder="ÂâçÂè∞Ê®ôÈ°åÊïòËø∞" style="width: 500px"/>
                    </label>
                </div>
                <div class="input-des">
                    <label for="">ÂÖßÊñáÔºö
                        <Input v-model="activeData.news_text_middle" clearable type="textarea" :rows="4" placeholder="Ë©≥Á¥∞ÂÖßÊñá(Êâø)" style="width: 500px"/>
                    </label>
                </div>
                <div class="input-des">
                    <label for="">ÂÖßÊñáÔºö
                        <Input v-model="activeData.news_text_trans" clearable type="textarea" :rows="4" placeholder="Ë©≥Á¥∞ÂÖßÊñá(ËΩâ)" style="width: 500px"/>
                    </label>
                </div>
                <div class="input-des">
                    <label for="">ÁµêÂ∞æÔºö
                        <Input v-model="activeData.news_text_end" clearable type="textarea" :rows="2" placeholder="Ë´ãËº∏ÂÖ•ÂÖßÂÆπ" style="width: 500px"/>
                    </label>
                </div>
            </div>
            <div class="input-pic">
                <label class="test" for="">ÊèíÂÖ•ÂúñÁâáÔºö
                    <input type="file">
                </label>
            </div>
            <div class="input-pic-des">
                <label for="">ÂúñÁâáÊïòËø∞Ôºö
                    <Input v-model="activeData.news_img_des" placeholder="Ë´ãËº∏ÂÖ•ÂúñÁâáÊïòËø∞" clearable style="width: 500px" />
                </label>
            </div>
            <div class="popup-btn">
                <button class="btn-blue_2nd" @click="editOnData">ÂèñÊ∂à</button>
                <button class="btn-blue" @click="editOnData">Á¢∫Ë™ç</button>
                    <!-- Á¢∫Ë™çÈçµÂäüËÉΩÂæÖË£úÔºåÊö´Êîætoggle -->
            </div>
        </div>
    </div>

    <!--‰∏≤ËÅØË≥áÊñôÁî®Ë°®ÂñÆ(ËçâÁ®ø)ÂèØ‰∏äÊû∂ÁÑ°‰∏ãÊû∂ -->
    <keep-alive>
        <div class="popup used" v-show="seeDraftData">
            <div class="popup-head font-20">
                <div class="news-no">
                    <span>ÂÖ¨ÂëäÁ∑®Ëôü</span>
                    <span>{{activeDraftData.news_no}}</span>
                </div>
                <div class="on-date">
                    <span class="date">ÁôºÂ∏ÉÊôÇÈñì</span>
                    <span class="date">{{activeDraftData.news_time}}</span>
                </div>
                <div class="last-edit-date">
                    <span class="date">ÊúÄÂæåÊõ¥Êñ∞</span>
                    <span class="date">{{activeDraftData.news_last_edit}}</span>
                </div>
            </div>
            <div class="popup-content font-18">
                <div class="popup-data">
                    <label for="">ÁãÄÊÖã(ÂøÖÂ°´)
                        <select name="" id="">
                            <option value="ËçâÁ®ø">ËçâÁ®ø</option>
                            <option value="‰∏äÊû∂">‰∏äÊû∂</option>
                        </select>
                    </label>
                    <label for="">ÂàÜÈ°û
                        <select name="" id="">
                            <option value="ÈáçË¶Å">ÈáçË¶Å</option>
                            <option value="Ê¥ªÂãï">Ê¥ªÂãï</option>
                            <option value="ÂÖ∂‰ªñ">ÂÖ∂‰ªñ</option>
                        </select>
                    </label>
                </div>
                <div class="input-txt">
                    <div class="input-title">
                        <label for="">Ê®ôÈ°åÔºö
                            <Input v-model="activeDraftData.news_title" placeholder="Ë´ãËº∏ÂÖ•Ê®ôÈ°å" clearable style="width: 500px" />
                        </label>
                    </div>
                    <div class="input-des">
                        <label for="">ÂºïÊñáÔºö
                            <Input v-model="activeDraftData.news_text_start" clearable type="textarea" :rows="2" placeholder="ÂâçÂè∞Ê®ôÈ°åÊïòËø∞" style="width: 500px"/>
                        </label>
                    </div>
                    <div class="input-des">
                        <label for="">ÂÖßÊñáÔºö
                            <Input v-model="activeDraftData.news_text_middle" clearable type="textarea" :rows="4" placeholder="Ë©≥Á¥∞ÂÖßÊñá(Êâø)" style="width: 500px"/>
                        </label>
                    </div>
                    <div class="input-des">
                        <label for="">ÂÖßÊñáÔºö
                            <Input v-model="activeDraftData.news_text_trans" clearable type="textarea" :rows="4" placeholder="Ë©≥Á¥∞ÂÖßÊñá(ËΩâ)" style="width: 500px"/>
                        </label>
                    </div>
                    <div class="input-des">
                        <label for="">ÁµêÂ∞æÔºö
                            <Input v-model="activeDraftData.news_text_end" clearable type="textarea" :rows="2" placeholder="Ë´ãËº∏ÂÖ•ÂÖßÂÆπ" style="width: 500px"/>
                        </label>
                    </div>
                </div>
                <div class="input-pic">
                    <label class="test" for="">ÊèíÂÖ•ÂúñÁâáÔºö
                        <input type="file">
                    </label>
                </div>
                <div class="input-pic-des">
                    <label for="">ÂúñÁâáÊïòËø∞Ôºö
                        <Input v-model="activeDraftData.news_img_des"  placeholder="Ë´ãËº∏ÂÖ•ÂúñÁâáÊïòËø∞" clearable style="width: 500px" />
                    </label>
                </div>
                <div class="popup-btn">
                    <button class="btn-blue_2nd" @click="editDraftData">ÂèñÊ∂à</button>
                    <button class="btn-blue" @click="editNewsData">Á¢∫Ë™ç</button>
                </div>
            </div>
        </div>
    </keep-alive>

    <!--‰∏≤ËÅØË≥áÊñôÁî®Ë°®ÂñÆ(‰∏ãÊû∂)Êü•Áúã(‰∏çÂèØÊõ¥ÊîπÂÖßÂÆπ)ÔºåÊâÄ‰ª•ÁÑ°ÂèñÊ∂àÈçµÔºåÁ¢∫Ë™çÂÉÖÁÇ∫ÂõûÂà∞Áï´Èù¢ -->
    <div class="popup off" v-show="seeOffData">
            <div class="popup-head font-20">
                <div class="news-no">
                    <span>ÂÖ¨ÂëäÁ∑®Ëôü</span>
                    <span >{{activeOffData.news_no}}</span>
                </div>
                <div class="on-date">
                    <span class="date">ÁôºÂ∏ÉÊôÇÈñì</span>
                    <span class="date">{{activeOffData.news_time}}</span>
                </div>
                <div class="last-edit-date">
                    <span class="date">ÊúÄÂæåÊõ¥Êñ∞</span>
                    <span class="date">{{activeOffData.news_last_edit}}</span>
                </div>
            </div>
            <div class="popup-content font-18">
                <div class="popup-data">
                    <label for="">ÁãÄÊÖã
                        <select disabled name="" id="">
                            <option value="off">‰∏ãÊû∂</option>
                        </select>
                    </label>
                    <label for="">ÂàÜÈ°û
                        <select name="" id="" disabled>
                            <option value="important">ÈáçË¶Å</option>
                            <option value="action">Ê¥ªÂãï</option>
                            <option value="other" >ÂÖ∂‰ªñ</option>
                        </select>
                    </label>
                </div>
                <div class="input-txt">
                    <div class="input-title">
                        <label for="">Ê®ôÈ°åÔºö
                            <Input disabled v-model="activeOffData.news_title" clearable style="width: 500px" />
                        </label>
                    </div>
                    <div class="input-des">
                        <label for="">ÂºïÊñáÔºö
                            <Input disabled v-model="activeOffData.news_text_start" clearable type="textarea" :rows="2" placeholder="ÂâçÂè∞Ê®ôÈ°åÊïòËø∞" style="width: 500px"/>
                        </label>
                    </div>
                    <div class="input-des">
                        <label for="">ÂÖßÊñáÔºö
                            <Input disabled v-model="activeOffData.news_text_middle" clearable type="textarea" :rows="4" placeholder="Ë©≥Á¥∞ÂÖßÊñá(Êâø)" style="width: 500px"/>
                        </label>
                    </div>
                    <div class="input-des">
                        <label for="">ÂÖßÊñáÔºö
                            <Input disabled v-model="activeOffData.news_text_trans" clearable type="textarea" :rows="4" placeholder="Ë©≥Á¥∞ÂÖßÊñá(ËΩâ)" style="width: 500px"/>
                        </label>
                    </div>
                    <div class="input-des">
                        <label for="">ÁµêÂ∞æÔºö
                            <Input disabled v-model="activeOffData.news_text_end" clearable type="textarea" :rows="2" placeholder="Ë´ãËº∏ÂÖ•ÂÖßÂÆπ" style="width: 500px"/>
                        </label>
                    </div>
                </div>
                <div class="input-pic">
                    <label class="test" for="">ÊèíÂÖ•ÂúñÁâáÔºö
                        <input disabled type="file">
                    </label>
                </div>
                <div class="input-pic-des">
                    <label for="">ÂúñÁâáÊïòËø∞Ôºö
                        <Input disabled v-model="activeOffData.news_img_des" placeholder="Ë´ãËº∏ÂÖ•ÂúñÁâáÊïòËø∞" clearable style="width: 500px" />
                    </label>
                </div>
                <div class="popup-btn">
                    <button @click="checkOffData" class="btn-blue">Á¢∫Ë™ç</button>
                </div>
            </div>
    </div>

    <!-- Êñ∞Â¢ûÊàêÂäü -->
    <!-- style="display:none" -->
    <div class="popup-box add font-18" v-show="seeCheck">
        <p class="popup-box-close">X</p>
        <p class="check-des">Êñ∞Â¢ûË≥áÊñôÊàêÂäü</p>
        <button @click="okToggle" class="btn-success">Á¢∫Ë™ç</button>
    </div>


    <!-- ‰øÆÊîπÊàêÂäü -->
    <div class="popup-box fix font-18" v-show="seeCheck" >
        <p class="popup-box-close">X</p>
        <p class="check-des">‰øÆÊîπË≥áÊñôÊàêÂäü</p>
        <button @click="okToggle" class="btn-success">Á¢∫Ë™ç</button>
    </div>

</template>
<!-- https://run.iviewui.com/4CEEQf1j -->
<script>
    export default {
        data () {
            return {
                seenNew:false, //Êñ∞Ë°®Ê†ºÂΩàÁ™óÔºåÁ∂ÅÊñ∞Ë°®ÂñÆv-show„ÄÅÊåâÈàï@click="newToggle"
                seeOnData:false, //‰∏äÊû∂Ë≥áÊñôÂΩàÁ™óÔºåÁ∂Å‰∏äÊû∂Ë≥áÊñôv-show„ÄÅÁ∑®ËºØÊåâÈàï@click="editOnData"
                seeDraftData:false, //ËçâÁ®øË≥áÊñôÂΩàÁ™óÔºåÁ∂ÅËçâÁ®øË≥áÊñôv-show„ÄÅÁ∑®ËºØÊåâÈàï@click="editDraftData"
                seeOffData:false, //‰∏ãÊû∂Ë≥áÊñôÂΩàÁ™óÔºåÁ∂Å‰∏ãÊû∂Ë≥áÊñôv-show„ÄÅÁ∑®ËºØÊåâÈàï@click="checkOffData"
                seeCheck:false, //Á¢∫Ë™çÂΩàÁ™ó„ÄÅv-show="seeCheck" ÊåâÈàï@click="okToggle"
                columns: [
            {
                title: 'ÂÖ¨ÂëäÁ∑®Ëôü',
                slot: 'news_no',
                width: 100,
                align: 'center'
            },
            {
                title: '‰∏äÊû∂Êó•Êúü',
                slot: 'news_time',
                width: 110,
                align: 'center',
                "sortable": true // ÊéíÂ∫è
            },
            {
                title: 'ÊúÄÂæå‰øÆÊîπ',
                slot: 'news_last_edit',
                width: 110,
                align: 'center',
                "sortable": true
            },
            {
                title: 'ÂàÜÈ°û',
                slot: 'news_type',
                width: 80,
                align: 'center',
                filters: [
                            {
                                label: 'ÈáçË¶Å',
                                value: 1
                            },
                            {
                                label: 'Ê¥ªÂãï',
                                value: 2
                            },
                            {
                                label: 'ÂÖ∂‰ªñ',
                                value: 3
                            }
                        ],
                        filterMultiple: false, //https://www.iviewui.com/view-ui-plus/component/form/table#Brief_Introduction
                        filterMethod (value,row) { 
                            if (value === 1) {
                                return row.news_type==='ÈáçË¶Å';
                            } else if (value === 2) {
                                return row.news_type==='Ê¥ªÂãï' ;
                            }else if (value === 3) {
                                return row.news_type==='ÂÖ∂‰ªñ' ;
                            }
                        }
            },
            {
                title: 'Ê®ôÈ°å',
                slot: 'news_title',
                align: 'center'
            },
            {
                title: 'ÁãÄÊÖã',
                slot: 'news_status',
                width: 70,
                align: 'center'
            },
            {
                title: 'Á∑®ËºØ',
                slot: 'action',
                width: 180,
                align: 'center'
            }
                ],
                news:[],
                dataOn: [
                    // {
                    //     news_no: '2022001',
                    //     news_time: '2022/12/01',
                    //     news_last_edit:'2022/12/01',
                    //     news_type: 'ÈáçË¶Å',
                    //     news_title: '„ÄåJS Êò•Â≠£Ë°åÁ®ãÊñπÊ°à„ÄçÂ†±ÂêçÈñãÂßã',
                    //     news_text_start:'ÊàëÂÄëÂ∑≤Á∂ìÈñãÂßãÊé•Âèó 2022 Âπ¥ 11 ÊúàËá≥ 2022 Âπ¥ 12 ÊúàÁôºËªäÁöÑ„ÄåJS Êò•Â≠£Ë°åÁ®ãÊñπÊ°à„Äç...',
                    //     news_text_middle:'Ê≠§Ê¨°Ë°åÁ®ãËàáÊ¥ªÂãïË´ãË¶ãÁ∂≤È†ÅË©≥Á¥∞‰ªãÁ¥π',
                    //     news_text_trans:'Êó©È≥•Ë®ÇË≥ºÂÑ™ÊÉ†4‰∫∫Ë°åÈüø87ÊäòÂÑ™ÊÉ†„ÄÇ',
                    //     news_text_end:'ÈÇÑÂú®Áå∂Ë±´‰ªÄÈ∫ºÂë¢?',
                    //     news_img:'1.jpg',
                    //     news_img_des:'ÈñÄÂè∏Ê∏ØÂ§úÊôØ',
                    //     news_status:'‰∏äÊû∂',
                    // }
                ],
                dataDraft: [],
                dataOff: [],
                editIndex: -1,  // ÂΩìÂâçËÅöÁÑ¶ÁöÑËæìÂÖ•Ê°ÜÁöÑË°åÊï∞
                activeIndex:null,
                }
            },
            methods: {
            // Ê∏¨Ë©¶Êú¨Âú∞Ë≥áÊñôÂ∫´ fetch
            getNews(){
                fetch('http://localhost/list.php')
                .then(res=>res.json())
                .then(json=>{
                    // ÊäìÂõûÊâÄÊúâË≥áÊñô
                    this.news = json;
                    // ÁØ©Ë≥áÊñôÊîæÈÄ≤"ÈáçË¶Å"Èô£Âàó
                    this.dataOn = this.news.filter(item => {
                        return item.news_status === "‰∏äÊû∂";
                    });
                    // ÁØ©Ë≥áÊñôÊîæÈÄ≤"Ê¥ªÂãï"Èô£Âàó
                    this.dataDraft = this.news.filter(item => {
                        return item.news_status === "ËçâÁ®ø";
                    });
                    // ÁØ©Ë≥áÊñôÊîæÈÄ≤"ÂÖ∂‰ªñ"Èô£Âàó
                    this.dataOff = this.news.filter(item => {
                        return item.news_status === "‰∏ãÊû∂";
                    });
                })
            },
            // getNews(){
			// //ÂèñÂæóÂïÜÂìÅË≥áÊñô XMLÊñπÊ≥ï
			//     let xhr = new XMLHttpRequest();
            //     let data = this;
			//     xhr.onload = function(){
			// 	    if(xhr.status == 200){ //OK
			// 		    data.dataOn = JSON.parse(xhr.responseText);
			// 	    }
			//     }
			//     xhr.open("get",'http://localhost/list.php', true);
			//     xhr.send(null);
		    // },
            // Êñ∞Â¢ûË≥áÊñô xhr
            addNewsData(){
                let xhr = new XMLHttpRequest();
                xhr.onload = function(){
                let result = JSON.parse(xhr.responseText);
                alert(result.msg);
                // document.getElementById("btnReset").click();
                // $id("btnReset").click();
                }
                xhr.open("post", "http://localhost/news_insert.php", true);
                xhr.send(new FormData(document.getElementById("addNewsForm")));
            },
            // ‰øÆÊîπË≥áÊñô fetch
            editNewsData(){
                fetch('http://localhost/news_update.php',{
                method:'POST', body:new URLSearchParams({
                // faq_no:this.editingFaq.faq_no,
                // faq_type:this.editingFaq.faq_type,
                // faq_q:this.editingFaq.faq_q,
                // faq_a:this.editingFaq.faq_a,
                // faq_status:this.editingFaq.faq_status,

                // news_no:this.news_no // ‰∏çÁµ¶Êõ¥Êñ∞?Ë¶ÅÂØ´Âóé
                // news_time:this.news_time //‰∏çÁµ¶Êõ¥Êñ∞?
                // news_last_edit:this.news_last_edit
                // news_type:this.news_type
                // news_title:this.news_title
                // news_text_start:this.news_text_start
                // news_text_middle:this.news_text_middle
                // news_text_trans:this.news_text_trans
                // news_text_end:this.news_text_end
                // news_img:this.news_img  //ÂúñÁâáÁãÄÊ≥ÅÂÖà‰∏çËÄÉÊÖÆ
                // news_img_des:this.news_img_des
                // news_status:this.news_status
                })})
                .then((res) => res.json())
                .then((result)=> { //‰∏ãÈù¢ÈÄôÊÆµÊ±ÇËß£Èáã
                // this.alert_Loading = true;
                // setTimeout(() => {
                //     this.alert_Loading = false;
                //     this.show_EditForm = false;
                //     this.$Message.success(result.msg);
                // }, 600);
                })
            },
            // Âà™Èô§Ë≥áÊñô
            delNewsData(){
                fetch('http://localhost/news_delete.php',{
                    method:'POST', body:new URLSearchParams({
                    news_no:this.deleteNo,
                })})
                .then((res) => res.json())
                .then((result)=> { //‰ª•‰∏ãÂæÖÊ±ÇËß£
                    this.alert_Loading = true;
                    setTimeout(() => {
                        this.activeList.splice(this.rowCount, 1);
                        this.alert_Loading = false;
                        this.show_delCheck = false;
                        this.$Message.success(result.msg);
                    }, 600);
                })
            },
            newToggle(){ //Êñ∞Ë°®ÂñÆ
                this.seenNew = !this.seenNew
            },
            editOnData(no){ //‰∏äÊû∂Á∑®ËºØË°®ÂñÆÂΩàÁ™ó
                this.seeOnData = !this.seeOnData;
                this.activeIndex = no;
            },
            editDraftData(no){ //ËçâÁ®øÁ∑®ËºØË°®ÂñÆÂΩàÁ™ó
                this.seeDraftData = !this.seeDraftData
                this.activeIndex = no;
            },
            checkOffData(no){ //‰∏ãÊû∂Ë≥áÊñôÂΩàÁ™ó
                this.seeOffData = !this.seeOffData
                this.activeIndex = no;
            },
            remove (index) { //ËçâÁ®ø -Âà™Èô§Ë≥áÊñô(ÁõÆÂâçÂÉÖÁï´Èù¢‰∏äÈ°ØÁ§∫Âà™Èô§)
            this.dataDraft.splice(index, 1);
            },
            okToggle () { //Á¢∫Ë™çÂΩàÁ™ó
                this.seeCheck = !this.seeCheck
            }
        },
        computed:{
            activeData() {
                return this.dataOn.find(v=> v.news_no === this.activeIndex) ?? {}
            },
            activeDraftData(){
                return this.dataDraft.find(v=> v.news_no === this.activeIndex) ?? {}
            },
            activeOffData(){
                return this.dataOff.find(v=> v.news_no === this.activeIndex) ?? {}
            }
        },
        created(){
            this.getNews();
        },
        mounted(){
        // this.getNews();
    },
    }
</script>

<style scoped lang="scss">
@import "../assets/Scss/components/scrollBar.scss";
/* -------------------ÂΩàÁ™ó ------------------------*/
.popup{
    position: absolute;
    top: 5px;
    left: 150px;
    margin: auto;
    z-index: 20;

    width: 70%;
    background-color: #4F6573;
}

/* ‰∏äÊñπÂçÄÂ°äÈ°èËâ≤ */
.popup-head{
    background-color: #2D3740;
    height: 80px;
    color: #ccc;

    display: flex;
    justify-content: space-around;
    align-items: center;
}

.popup-data{
    margin: 30px 0;
    display: flex;
    justify-content: space-around;
}
.input-title{
    margin-bottom: 40px;
    padding-left: 85px;
}
.input-des,
.input-pic,
.input-pic-des{
    margin-bottom: 15px;
    padding-left: 85px;

}
.input-txt{
    margin-bottom: 40px;
}
.popup-btn{
    margin: 90px 0 50px 0 ;
    display: flex;
    justify-content: center;

}

.popup-btn button{
    margin: 0 100px;
}

/* ÂΩàÁ™óÂ≠óÈ°èËâ≤ */
.popup label{
    color: #fff;
}
.date{
    color: #ccc;
}
/* -------------------ÂΩàÁ™óÁµêÊùü----------------- */
/* -------------------Êñ∞Â¢û‰øÆÊîπbox ------------------------*/
.popup-box{
    position: absolute;
    top: 200px;
    left: 400px;
    width: 400px;
    height: 230px;
    border: 1px solid #6c9255;
    border-radius: 10px;
    background-color: #ffffff;
    text-align: center;
}   

.popup-box-close{
    text-align: end;
    margin-top: 10px;
    padding-right: 20px;
}

.check-des{
    margin-top: 70px;
}

.popup-box button{
    margin-top: 30px;
}

/* -------------------Êñ∞Â¢û‰øÆÊîπÁµêÊùü ------------------------*/




/* Êñ∞Â¢ûÊåâÈàï */
.btn-add{
    text-align: end;
    margin-right: 60px;
}
.btn-add button{
    padding: 8px 16px;

}
/* Á¢∫Ë™çÂΩàÁ™óÊåâÈàï */
.popup-box .btn-success{
    padding: 8px 32px;
}

/* Á¢∫Ë™çÂΩàÁ™óÊñáÂ≠ó */
.popup-box .check-des{
    translate:0 -16px ;
}
// classÂêçÁ®±
// .btn-blue        ÊåâÈàï:ËóçËâ≤
// .btn-blue_2nd    ÊåâÈàï:ÁôΩÂ∫ïËóçÊ°Ü
// .btn-gold        ÊåâÈàï:ÂúüËâ≤
// .btn-gold_2nd    ÊåâÈàï:ÁôΩÂ∫ïÂúüÊ°Ü
// .btn-success     ÊåâÈàï:Á∂†Ëâ≤
// .btn-success_2nd ÊåâÈàï:ÁôΩÂ∫ïÁ∂†Ê°Ü
// .btn-danger      ÊåâÈàï:Á¥ÖËâ≤
// .btn-danger_2nd  ÊåâÈàï:ÁôΩÂ∫ïÁ¥ÖÊ°Ü


</style>